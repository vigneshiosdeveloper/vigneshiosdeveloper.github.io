<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Opening ADIB Business App…</title>

  <script>
    // iOS App Store (web – works on iPhone and Mac browsers)
    const IOS_APP_STORE =
      "https://apps.apple.com/in/app/adib-direct-business/id1447735010";

    // Android Play Store
    const ANDROID_PLAY_STORE =
      "https://play.google.com/store/apps/details?id=com.intellectdesign.cbx";

    function getParams() {
      return window.location.search || "";
    }

    function getAppSchemeUrl() {
      return "openfinance://login" + getParams();
    }

    function isIOS() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    function isAndroid() {
      return /Android/i.test(navigator.userAgent);
    }

    function isMacDesktop() {
      return /Macintosh/i.test(navigator.userAgent);
    }

    function openAppOrStore() {
      const appUrl = getAppSchemeUrl();

      // Try to open the OpenFinance app
      window.location = appUrl;

      // Fallback after 1 second
      setTimeout(function () {
        if (isIOS()) {
          // iPhone/iPad → iOS App Store
          window.location = IOS_APP_STORE;
        } else if (isAndroid()) {
          // Android → Play Store
          window.location = ANDROID_PLAY_STORE;
        } else if (isMacDesktop()) {
          // Mac browser → open the same App Store web page (like old behavior)
          window.location = IOS_APP_STORE;
        } else {
          // Other platforms (Windows, etc.) → generic fallback
          window.location = IOS_APP_STORE;
        }
      }, 1000);
    }

    window.onload = openAppOrStore;
  </script>
</head>
<body>
  <p>Opening ADIB Business App…</p>
  <p>If nothing happens, you will be redirected to the App Store / Play Store.</p>
</body>
</html>
