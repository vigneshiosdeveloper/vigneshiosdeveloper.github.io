<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Open OpenFinance App</title>

  <script>
    // 1) Your *universal link* URL (this same page, with params)
    function getUniversalUrl() {
      return window.location.href; // keep query params
    }

    // 2) Your target app custom scheme (already working)
    function getAppSchemeUrl() {
      // reuse same params with your openfinance scheme
      const params = window.location.search || "";
      return "openfinance://login" + params;
    }

    // 3) App Store fallback
    const APP_STORE_URL = "https://apps.apple.com/in/app/adib-direct-business/id1447735010";

    function openAppOrStore() {
      const appUrl = getAppSchemeUrl();

      // Try to open the app via custom scheme
      window.location = appUrl;

      // If app is not installed, after 1s go to App Store
      setTimeout(function () {
        window.location = APP_STORE_URL;
      }, 1000);
    }

    window.onload = openAppOrStore;
  </script>
</head>
<body>
  <p>Opening appâ€¦ If nothing happens, you will be redirected to the App Store.</p>
</body>
</html>
